"use strict";function updateGeneralValues(t){$("#main").unbind("load"),$("#main").is(":empty")&&$("#main").load("main.html");for(let t=1;5>=t;t++)$("#add"+t).unbind("load"),$("#add"+t).is(":empty")&&$("#add"+t).load("motor"+t+".html");[["Key",5],["Emer",6],["Alarm",7],["Pow",8],["Cir",9],["Safe",10] ].forEach(a=>{1==t[a[1] ]?$("#bg"+a[0]).attr("fill","#444444"):$("#bg"+a[0]).attr("fill","#c32d2d")});switch([["01",2],["02",3],["03",4] ].forEach(a=>{1==t[a[1] ]?$("#lS"+a[0]).attr("fill","#c32d2d"):$("#lS"+a[0]).attr("fill","#2e3c47")}),$("#tSpeed").html(t[14]),$("#tTrips").html(Math.floor(t[15])),$("#tSP").html(t[11]),t[13]){case 0:$("#tMode").css({fill:"#c32d2d"}),$("#tMode").html("LOCAL");break;case 1:$("#tMode").css({fill:"#ff8000"}),$("#tMode").html("MANUAL");break;case 2:$("#tMode").css({fill:"#00d900"}),$("#tMode").html("AUTO")}if(1==t[16]?($("#tManR").css({fill:"#00d900"}),$("#tManR").html("READY")):($("#tManR").css({fill:"#ff8000"}),$("#tManR").html("NOT READY")),1==t[0]?($("#bgMode").attr("stroke","#23a0d1"),$("#sMan").attr("visibility","hidden"),$("#sAuto").attr("visibility","visible")):($("#bgMode").attr("stroke","#ff8000"),$("#sAuto").attr("visibility","hidden"),$("#sMan").attr("visibility","visible")),1==t[12]?($("#bgLight").attr("stroke","#23a0d1"),$("#sOff").attr("visibility","hidden"),$("#sOn").attr("visibility","visible")):($("#bgLight").attr("stroke","#444444"),$("#sOn").attr("visibility","hidden"),$("#sOff").attr("visibility","visible")),"AUTO"==$("#tMode").prop("textContent")){for(let t=2;10>=t;t++)$("#bStart"+t).attr("visibility","hidden"),$("#bStop"+t).attr("visibility","hidden"),$("#tM"+t).css({fill:"#444444"});$("#tM1").html("ALL")}else{for(let t=2;10>=t;t++)$("#bStart"+t).attr("visibility","visible"),$("#bStop"+t).attr("visibility","visible"),$("#tM"+t).css({fill:"#ffffff"});$("#tM1").html("M1")}setTimeout(function(){S7Framework.readData("js/S7_dataGeneral.json","cyclic read data",updateGeneralValues)},500)}var plcType,loadReport;$(document).ready(function(){plcType="1500",$("#main").load("main.html");for(let t=1;5>=t;t++)$("#add"+t).load("motor"+t+".html");$.init()}),$.init=function(){function t(){var t=parseInt($("#tSP").prop("textContent"),10);t>20&&(t=t-1-i),20>t&&(t=20);var a='"General_Data".invertorSpeedSP='+t;S7Framework.writeData("js/S7_dataToPLC.json",a,""),i++}function a(){var t=parseInt($("#tSP").prop("textContent"),10);50>t&&(t=t+1+i),t>50&&(t=50);var a='"General_Data".invertorSpeedSP='+t;S7Framework.writeData("js/S7_dataToPLC.json",a,""),i++}$("#main").on("click","#bPage2",function(){document.location.href="page2.html"}),S7Framework.initialize(plcType,""),S7Framework.readData("js/S7_dataGeneral.json","init read data",updateGeneralValues);const e=[1,2,3,4,5,6,7,8,9,10];var o,i;e.forEach(t=>{S7Framework.readData("js/S7_dataMotor"+t+".json","init read data",window["updateMotor"+t+"Values"])}),$("#main").on("mousedown","#bMin",function(){t(),o=setInterval(function(){t()},500)}).on("mouseup","#bMin",function(){i=0,clearInterval(o)}).on("mouseout","#bMin",function(){i=0,clearInterval(o)}),$("#main").on("touchstart","#bMin",function(){t(),o=setInterval(function(){t()},500)}).on("touchend","#bMin",function(){i=0,clearInterval(o)}).on("touchmove","#bMin",function(){i=0,clearInterval(o)}),$("#main").on("mousedown","#bMax",function(){a(),o=setInterval(function(){a()},500)}).on("mouseup","#bMax",function(){i=0,clearInterval(o)}).on("mouseout","#bMax",function(){i=0,clearInterval(o)}),$("#main").on("touchstart","#bMax",function(){a(),o=setInterval(function(){a()},500)}).on("touchend","#bMax",function(){i=0,clearInterval(o)}).on("touchmove","#bMax",function(){i=0,clearInterval(o)}),$("#main").on("click","#bMode",function(){if("visible"==$("#sAuto").attr("visibility"))var t='"General_Data".controlMode=false';else t='"General_Data".controlMode=true';S7Framework.writeData("js/S7_dataToPLC.json",t,"")}),$("#main").on("click","#bLight",function(){if("visible"==$("#sOn").attr("visibility"))var t='"General_Data".lightingControl=false';else t='"General_Data".lightingControl=true';S7Framework.writeData("js/S7_dataToPLC.json",t,"")}),e.forEach(t=>{$("#add"+Math.ceil(t/2)).on("click","#bStart"+t,function(){if("AUTO"==$("#tMode").prop("textContent"))var a='"General_Data".autoStart=true';else a='"Motor_'+t+'".manualStart=true';S7Framework.writeData("js/S7_dataToPLC.json",a,"")}),$("#add"+Math.ceil(t/2)).on("click","#bStop"+t,function(){if("AUTO"==$("#tMode").prop("textContent"))var a='"General_Data".autoStop=true';else a='"Motor_'+t+'".manualStop=true';S7Framework.writeData("js/S7_dataToPLC.json",a,"")})}),e.forEach(t=>{$("#add"+Math.ceil(t/2)).on("click","#bKC"+t,function(){if("#c32d2d"==$("#lKC"+t).attr("fill"))var a='"Motor_'+t+'".blockKc=false';else a='"Motor_'+t+'".blockKc=true';S7Framework.writeData("js/S7_dataToPLC.json",a,"")}),$("#add"+Math.ceil(t/2)).on("click","#bCL"+t,function(){if("#c32d2d"==$("#lCL"+t).attr("fill"))var a='"Motor_'+t+'".blockCl=false';else a='"Motor_'+t+'".blockCl=true';S7Framework.writeData("js/S7_dataToPLC.json",a,"")})})};const num=[1,2,3,4,5,6,7,8,9,10];num.forEach(t=>{window["updateMotor"+t+"Values"]=function(a){1==a[4]?($("#tCond"+t).css({fill:"#00d900"}),$("#tCond"+t).html("ON")):($("#tCond"+t).css({fill:"#ffffff"}),$("#tCond"+t).html("OFF")),1==a[5]?($("#tReady"+t).css({fill:"#00d900"}),$("#tReady"+t).html("YES")):($("#tReady"+t).css({fill:"#ffffff"}),$("#tReady"+t).html("NO"));[["Belt",6],["Cover",7],["Cable",8],["Speed",9],["Safety",10] ].forEach(e=>{1==a[e[1] ]?$("#l"+e[0]+t).attr("fill","#c32d2d"):$("#l"+e[0]+t).attr("fill","#2e3c47")}),1==a[2]?$("#lKC"+t).attr("fill","#c32d2d"):$("#lKC"+t).attr("fill","#d2d2d2"),1==a[3]?$("#lCL"+t).attr("fill","#c32d2d"):$("#lCL"+t).attr("fill","#d2d2d2"),setTimeout(function(){S7Framework.readData("js/S7_dataMotor"+t+".json","cyclic read data",window["updateMotor"+t+"Values"])},500)}});